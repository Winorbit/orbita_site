### Структура проекта:
|           | **home/**  |            |
|:--------- |:----------:|-----------:|
|           |**orbita/** |            |
|**dev/**   |**release/**|**dev/**    |
|nginx/     |nginx/      |nginx/      |
|web_api/   |web_api/    |web_api/    |
|web_ui/    |web_ui/     |web_ui/     |
|           |**ports:**  |            |
|1337 и 8007|1338 и 8008 |1339        |

### Работа с докером:
- войти в директорию где лежит docker-compose.yml
- в терминале ввести команду для поднятия контейнеров:  
```$ docker-compose up —build -d```  
или для поднятия контейнеров в **dev** окружении:  
```$ docker-compose -f docker-compose.dev.yml up --build```
- остановить и удалить контейнеры:
```$ docker-compose down```

### Работа с pipenv окружением:
- установить pipenv:
```$ pip install pipenv```
- зайти в директорию конкретного проекта **web_api** либо **web_ui**
- поднять окружение:
```$ pipenv shell```
- установить зависимости последней версии:
```$ pipenv install```  
либо  
- установить зависимости конкретных версий, которые находятся в Pipfile.lock:  
```$ pipenv install --ignore-pipfile```  

>полезные команды:
>>- Использование аргумента `--dev` поместит зависимость в специальную папку [dev-packages] в _Pipfile_ :  
>>```$ pipenv install пакет --dev```  
>>- Установит все зависимости, необходимые для разработки, которые включают в себя как обычные зависимости, так и те, которые вы указали в аргументе `--dev` во время установки:  
>>```$ pipenv install --dev```  
>>-  Создаст/обновит файл _Pipfile.lock_:  
>>```$ pipenv lock```  
>>-  Выведет древовидную структуру, показывающую зависимости:  
>>```$ pipenv graph```  
>>- Перевернутое дерево может быть более полезным, когда вы пытаетесь выяснить конфликтующие подчиненные зависимости:  
>>```$ pipenv graph --reverse```  
>>- Проверить наличие уязвимостей безопасности (и требований PEP 508) в вашей среде:  
>>```$ pipenv check```  
>>- Удалить пакет(ы), dev-пакеты:  
>>```$ pipenv uninstall пакет```  
>>```$ pipenv uninstall --all```  
>>```$ pipenv uninstall --all-dev```  
>>- Узнать, по какому пути находится виртуальная среда:  
>>```$ pipenv --venv```  
>>- Узнать, по какому пути находится ваш проект:  
>>```$ pipenv --where```

### Просмотр логов:
- коннектимся к серверу по ssh:
```$ ssh orbita@31.131.28.206```
- вводим пароль:
```$ ********```
- выбираем проект **dev** либо **release** либо **prod** и интересующий сервис **web_api** либо **web_ui**:  
```$ nano /home/orbita/dev/web_api/api_logfile.log```  
```$ nano /home/orbita/dev/web_ui/ui_logfile.log```
- для просмотра логов **nginx** выбираем проект **dev** либо **release** либо **prod**:  
```$ nano /home/orbita/dev/nginx/access.log```  
```$ nano /home/orbita/dev/nginx/error.log```

### Запуск Sentry локально в докере и подключение к нашему проекту:
- создаем папку _sentry_ заходим в нее  
- клонируем репозиторий:  
```git clone git@github.com:getsentry/onpremise.git .```  
- запускаем скрипт:  
```./install.sh```  
- запускаем контейнеры:  
```docker-compose up --build -d```  
- вставляем в адресную строку:  
```http://0.0.0.0:9000/```  
- клацаем "Lost your password?" получаем пароль, логинимся  
- в правом верхнем углу клацаем "Create Project" -> выбираем "Django" -> задаем имя проекта -> "Create"  
- копируем **dsn**, пример того что нужно скопировать:  
```"http://d2c11a7b94d148b7a4fe65fbcc271f73@0.0.0.0:9000/4"```  
- в папках _web_api_ и _web_ui_ создаем файлик _.env_ создаем переменную **DSN_SENTRY**  
и вставляем то, что скопировали, в созданные файлики пример:  
```DSN_SENTRY="http://d2c11a7b94d148b7a4fe65fbcc271f73@0.0.0.0:9000/4"```  
- запускаем окружение `pipenv shell`, если запущено, перезапускаем  
- устанавливаем `sentry-sdk`:  
```pipenv install sentry-sdk``  
